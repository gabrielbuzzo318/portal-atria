datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id           String   @id @default(cuid())
  name         String
  email        String   @unique
  passwordHash String

  // papel do usuário: "ACCOUNTANT" ou "CLIENT"
  role         String   @default("CLIENT")

  // documentos em que ele é o CLIENTE (dono)
  clientDocuments   Document[] @relation("ClientDocuments")

  // documentos que ele fez upload (ex.: Ester)
  uploadedDocuments Document[] @relation("UploadedDocuments")

  createdAt DateTime @default(now())
}

model Document {
  id           String   @id @default(cuid())

  // RELAÇÃO COM O CLIENTE (dono do documento)
  client       User     @relation("ClientDocuments", fields: [clientId], references: [id])
  clientId     String

  // RELAÇÃO COM QUEM FEZ O UPLOAD
  uploadedBy   User     @relation("UploadedDocuments", fields: [uploadedById], references: [id])
  uploadedById String

  // tipo: "NF", "BOLETO", "OTHER" (salvo como string)
  type         String   @default("OTHER")

  // competência opcional (tipo "01/2025")
  competencia  String?

  path         String
  originalName String
  storedName   String
  createdAt    DateTime @default(now())
}
